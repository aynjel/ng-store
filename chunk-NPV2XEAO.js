import{n as J,p as Q,q as X,s as Y,t as Z,u as ee,w as te}from"./chunk-BZQP3327.js";import{a as ie,c as ne,f as re,k as oe,l as se,m as ae,o as le}from"./chunk-P35TCHRP.js";import{l as G}from"./chunk-UGDYXJF4.js";import{$a as C,Ab as N,Bb as I,Cb as j,Da as l,H as O,I as B,Ma as w,Nb as F,Pb as W,Qb as M,U as T,Y as q,Z as b,_a as v,a as y,ab as K,bb as z,ca as u,cb as H,da as g,db as _,eb as c,fb as m,hb as s,ib as a,jb as f,ma as E,mb as U,pb as x,q as S,qb as k,rb as p,v as P,xb as o,yb as h,zb as $}from"./chunk-TJPZ7RZT.js";var L=class i{fireStore=b(J);collectionRef;constructor(t){this.collectionRef=X(this.fireStore,t)}get(t){let e=Y(this.collectionRef,t);return S(Z(e)).pipe(P(n=>n.exists()?y({id:n.id},n.data()):void 0))}getAll(){let t=te(this.collectionRef);return S(ee(t)).pipe(P(r=>r.docs.map(n=>y({id:n.id},n.data()))))}create(t){return S(Q(this.collectionRef,t)).pipe(P(r=>y({id:r.id},t)))}static \u0275fac=function(e){return new(e||i)(q("docCollection"))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};var D=class i extends L{httpClient=b(G);constructor(){super("users")}static \u0275fac=function(e){return new(e||i)};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};function me(i,t){if(i&1){let e=U();s(0,"tr")(1,"td"),o(2),a(),s(3,"td"),o(4),a(),s(5,"td"),o(6),a(),s(7,"td")(8,"span",2),o(9),a()(),s(10,"td")(11,"div",3)(12,"button",4),o(13," \u22EE "),a(),s(14,"ul",5)(15,"li")(16,"button",6),k("click",function(){let n=u(e).$implicit,d=p();return g(d.editUser.emit(n))}),o(17," Edit "),a()(),s(18,"li")(19,"button",7),k("click",function(){let n=u(e).$implicit,d=p();return g(d.deleteUser.emit(n))}),o(20," Delete "),a()()()()()()}if(i&2){let e=t.$implicit,r=t.$index;l(2),h(r+1),l(2),h(e.name),l(2),h(e.email),l(3),h(e.role)}}function ce(i,t){i&1&&(s(0,"tr")(1,"td",8),f(2,"div",9),a()(),s(3,"tr")(4,"td",8),f(5,"div",9),a()(),s(6,"tr")(7,"td",8),f(8,"div",9),a()(),s(9,"tr")(10,"td",8),f(11,"div",9),a()(),s(12,"tr")(13,"td",8),f(14,"div",9),a()(),s(15,"tr")(16,"td",8),f(17,"div",9),a()(),s(18,"tr")(19,"td",8),f(20,"div",9),a()())}function pe(i,t){if(i&1&&(s(0,"tr")(1,"td",8)(2,"div",10)(3,"span"),o(4),a()()()()),i&2){let e=p(2);l(4),h(e.error())}}function ue(i,t){i&1&&(s(0,"tr")(1,"td",8)(2,"div",11)(3,"span"),o(4,"No users found."),a()()()())}function ge(i,t){if(i&1&&v(0,ce,21,0)(1,pe,5,1,"tr")(2,ue,5,0,"tr"),i&2){let e=p();C(e.isLoading()?0:e.error()?1:2)}}var V=class i{users=M.required();isLoading=M.required();error=M.required();editUser=W();deleteUser=W();onEditUser(t){this.editUser.emit(t)}onDeleteUser(t){this.deleteUser.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-users-list-component"]],inputs:{users:[1,"users"],isLoading:[1,"isLoading"],error:[1,"error"]},outputs:{editUser:"editUser",deleteUser:"deleteUser"},decls:18,vars:1,consts:[[1,"overflow-x-auto","min-h-[200px]"],[1,"table","w-full"],[1,"badge","badge-outline","badge-info"],[1,"dropdown","dropdown-end"],["tabindex","0","aria-label","Actions",1,"btn","btn-sm","btn-circle","btn-ghost"],["tabindex","0",1,"dropdown-content","menu","p-2","shadow","bg-base-100","rounded-box","w-32"],[1,"justify-between",3,"click"],[1,"justify-between","text-error",3,"click"],["colspan","6"],[1,"skeleton","h-10","w-full"],[1,"alert","alert-error"],[1,"alert","alert-info"]],template:function(e,r){e&1&&(s(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),o(5,"#"),a(),s(6,"th"),o(7,"Name"),a(),s(8,"th"),o(9,"Email"),a(),s(10,"th"),o(11,"Role"),a(),s(12,"th"),o(13,"Actions"),a()()(),s(14,"tbody"),z(15,me,21,4,"tr",null,K,!1,ge,3,1),a()()()),e&2&&(l(15),H(r.users()))},encapsulation:2})};function _e(i,t){if(i&1){let e=U();c(0,"button",11),x("click",function(){u(e);let n=p(2);return g(n.clearSearch())}),o(1," \u2715 "),m()}}function fe(i,t){if(i&1){let e=U();c(0,"div",4)(1,"div",7)(2,"input",8),j("ngModelChange",function(n){u(e);let d=p();return I(d.searchTerm,n)||(d.searchTerm=n),g(n)}),x("ngModelChange",function(n){u(e);let d=p();return d.searchTerm.set(n),g(d.currentPage.set(1))}),m(),v(3,_e,2,0,"button",9),m(),c(4,"button",10),x("click",function(){u(e);let n=p();return g(n.addUser())}),o(5,"Add User"),m()()}if(i&2){let e=p();l(2),N("ngModel",e.searchTerm),l(),C(e.searchTerm().length>0?3:-1)}}function xe(i,t){if(i&1){let e=U();c(0,"div",6)(1,"div",12)(2,"select",13),j("ngModelChange",function(n){u(e);let d=p();return I(d.itemsPerPage,n)||(d.itemsPerPage=n),g(n)}),x("ngModelChange",function(n){u(e);let d=p();return d.itemsPerPage.set(n),g(d.currentPage.set(1))}),c(3,"option",14),o(4,"5 per page"),m(),c(5,"option",14),o(6,"10 per page"),m(),c(7,"option",14),o(8,"20 per page"),m(),c(9,"option",14),o(10,"50 per page"),m(),c(11,"option",14),o(12,"100 per page"),m()(),c(13,"button",15),x("click",function(){u(e);let n=p();return g(n.prevPage())}),o(14," \xAB "),m(),c(15,"button",16),o(16),m(),c(17,"button",15),x("click",function(){u(e);let n=p();return g(n.nextPage())}),o(18," \xBB "),m()()()}if(i&2){let e=p();l(2),N("ngModel",e.itemsPerPage),l(),_("value",5),l(2),_("value",10),l(2),_("value",20),l(2),_("value",50),l(2),_("value",100),l(2),_("disabled",e.currentPage()===1),l(3),$("Page ",e.currentPage()),l(),_("disabled",e.paginatedUsers().length<e.itemsPerPage())}}var R=class i{userService=b(D);isLoading=E(!0);error=E(null);users=E([]);searchTerm=E("");currentPage=E(1);itemsPerPage=E(10);paginatedUsers=F(()=>{let t=(this.currentPage()-1)*this.itemsPerPage(),e=t+this.itemsPerPage();return this.users().slice(t,e)});filteredUsers=F(()=>{let t=this.searchTerm().toLowerCase();return this.paginatedUsers().filter(e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.role.toLowerCase().includes(t))});ngOnInit(){this.userService.getAll().pipe(B(),O(()=>this.isLoading.set(!1))).subscribe({next:t=>{this.users.set(t)},error:t=>{this.error.set("Failed to load users. Please try again later."),console.error(t)}})}addUser(){}editUser(t){console.log("Edit user:",t)}deleteUser(t){console.log("Delete user:",t)}prevPage(){this.currentPage()>1&&this.currentPage.update(t=>t-1)}nextPage(){this.currentPage.update(t=>t+1)}clearSearch(){this.searchTerm.set(""),this.currentPage.set(1)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-users-page"]],decls:9,vars:5,consts:[["id","users-page",1,"min-h-screen","p-6"],[1,"text-center","mb-10"],[1,"text-4xl","font-bold","text-white"],[1,"mt-2","text-gray-300","text-sm"],[1,"mb-4","flex","items-center","gap-2"],[3,"editUser","deleteUser","users","isLoading","error"],[1,"mt-4","flex","justify-end"],[1,"relative","w-full","max-w-xs"],["type","text","placeholder","Search users...",1,"input","input-bordered","w-full","pr-10",3,"ngModelChange","ngModel"],["aria-label","Clear search",1,"absolute","right-2","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600"],[1,"btn","btn-primary",3,"click"],["aria-label","Clear search",1,"absolute","right-2","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600",3,"click"],[1,"join"],[1,"join-item","select","select-bordered",3,"ngModelChange","ngModel"],[3,"value"],[1,"join-item","btn",3,"click","disabled"],[1,"join-item","btn"]],template:function(e,r){e&1&&(c(0,"section",0)(1,"div",1)(2,"h2",2),o(3,"Manage Users"),m(),c(4,"p",3),o(5," View, add, edit, or remove users from the system. "),m()(),v(6,fe,6,2,"div",4),c(7,"app-users-list-component",5),x("editUser",function(d){return r.editUser(d)})("deleteUser",function(d){return r.deleteUser(d)}),m(),v(8,xe,19,9,"div",6),m()),e&2&&(l(6),C(!r.isLoading()&&!r.error()&&r.users().length>0?6:-1),l(),_("users",r.filteredUsers())("isLoading",r.isLoading())("error",r.error()),l(),C(!r.isLoading()&&!r.error()&&r.users().length>0?8:-1))},dependencies:[le,se,ae,ie,oe,ne,re,V],encapsulation:2})};var $e=[{path:"",component:R}];export{$e as routes};

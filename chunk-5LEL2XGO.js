import{b as V,c as E}from"./chunk-Y7OXBZQ4.js";import{a as U}from"./chunk-7TD4XGKB.js";import{a as w,b as e,c as y,d as S,e as u,g as L,i as x,j as F,n as C,p as N}from"./chunk-XLFTYWNK.js";import{D as n,Ea as h,G as f,U as m,V as a,W as t,X as p,aa as v,da as d,e as k,f as g,fa as b,g as D,k as I,o as s,w as c,za as T}from"./chunk-OUXMU6IP.js";import"./chunk-2NFLSA4Y.js";var R=class l{formBuilder=s(C);toastService=s(E);authService=s(V);router=s(h);isLoading=c(!1);loginForm=this.formBuilder.group({username:new u("",[e.required,e.minLength(3),e.maxLength(20)]),password:new u("",[e.required,e.minLength(6),e.maxLength(100)])});onSubmit(){if(!this.loginForm.valid||this.isLoading())return;let o={username:this.loginForm.value.username,password:this.loginForm.value.password};this.authService.login(o).pipe(k(3e3),g(()=>this.isLoading.set(!1))).subscribe({next:r=>{this.toastService.show("Login successful","success"),this.router.navigate(["/home"])},error:r=>{this.toastService.show("Login failed: "+r.error,"error")}})}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=f({type:l,selectors:[["app-login"]],decls:16,vars:5,consts:[[1,"card","max-w-lg","mx-auto","mt-30"],[1,"card-title","justify-center","text-3xl","text-primary"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["id","username","formControlName","username",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],[1,"flex","gap-3","mb-4"],[1,"flex-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["type","submit",1,"btn","mt-4","w-full","btn-primary",3,"disabled"]],template:function(r,i){r&1&&(a(0,"div",0)(1,"div",1),d(2,"Sign In"),t(),a(3,"div",2)(4,"form",3),v("ngSubmit",function(){return i.onSubmit()}),a(5,"div",4)(6,"label",5),d(7,"Username"),t(),p(8,"input",6),t(),a(9,"div",7)(10,"div",8)(11,"label",9),d(12,"Password"),t(),p(13,"input",10),t()(),a(14,"button",11),d(15),t()()()()),r&2&&(n(4),m("formGroup",i.loginForm),n(4),m("readonly",i.isLoading()),n(5),m("readonly",i.isLoading()),n(),m("disabled",i.isLoading()),n(),b(" ",i.isLoading()?"Logging in...":"Login"," "))},dependencies:[N,L,w,y,S,x,F],encapsulation:2})};var P=class l{httpClient=s(T);create(o){return this.httpClient.post(U.baseApiUrl+"users",o)}static \u0275fac=function(r){return new(r||l)};static \u0275prov=I({token:l,factory:l.\u0275fac,providedIn:"root"})};var M=class l{userService=s(P);toastService=s(E);formBuilder=s(C);router=s(h);isLoading=c(!1);registerForm=this.formBuilder.group({username:new u("",[e.required,e.minLength(3),e.maxLength(20)]),email:new u("",[e.required,e.email]),password:new u("",[e.required,e.minLength(6),this.passwordsMatchValidator()]),confirmPassword:new u("",[e.required,e.minLength(6),this.passwordsMatchValidator()])});ngOnInit(){this.formBuilder.group({username:["",e.required],email:["",[e.required,e.email]],password:["",e.required],confirmPassword:["",e.required]})}onSubmit(){if(!this.registerForm.valid||!this.isPasswordMatch(this.registerForm.value.password,this.registerForm.value.confirmPassword))return;let o={id:parseInt(crypto.randomUUID().toString()),email:this.registerForm.value.email,username:this.registerForm.value.username,password:this.registerForm.value.password};this.isLoading.set(!0),this.userService.create(o).pipe(D(),g(()=>this.isLoading.set(!1))).subscribe({next:r=>{this.toastService.show("Registration successful!","success"),this.router.navigate(["/auth/login"])},error:r=>{this.toastService.show("Registration failed. Please try again.","error")}})}passwordsMatchValidator(){return o=>{let r=o.get("password")?.value,i=o.get("confirmPassword")?.value;return r===i?null:{passwordsMismatch:!0}}}isPasswordMatch(o,r){return o===r}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=f({type:l,selectors:[["app-register"]],decls:24,vars:7,consts:[[1,"card","max-w-lg","mx-auto","mt-10"],[1,"card-title","justify-center","text-3xl","text-primary"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["id","username","formControlName","username",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","formControlName","email",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],[1,"flex","gap-3","mb-4"],[1,"flex-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["id","confirmPassword","formControlName","confirmPassword","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["type","submit",1,"btn","mt-4","w-full","btn-primary",3,"disabled"]],template:function(r,i){r&1&&(a(0,"div",0)(1,"div",1),d(2,"Sign Up"),t(),a(3,"div",2)(4,"form",3),v("ngSubmit",function(){return i.onSubmit()}),a(5,"div",4)(6,"label",5),d(7,"Username"),t(),p(8,"input",6),t(),a(9,"div",4)(10,"label",7),d(11,"Email"),t(),p(12,"input",8),t(),a(13,"div",9)(14,"div",10)(15,"label",11),d(16,"Password"),t(),p(17,"input",12),t(),a(18,"div",10)(19,"label",13),d(20,"Confirm Password"),t(),p(21,"input",14),t()(),a(22,"button",15),d(23),t()()()()),r&2&&(n(4),m("formGroup",i.registerForm),n(4),m("readonly",i.isLoading()),n(4),m("readonly",i.isLoading()),n(5),m("readonly",i.isLoading()),n(4),m("readonly",i.isLoading()),n(),m("disabled",i.isLoading()),n(),b(" ",i.isLoading()?"Registering...":"Register"," "))},dependencies:[N,L,w,y,S,x,F],encapsulation:2})};var ce=[{path:"register",component:M,title:"Register"},{path:"login",component:R,title:"Login"}];export{ce as routes};

import{a as N,b as R}from"./chunk-7BNGWYMA.js";import"./chunk-ZTF5SZY5.js";import{c as h,d as b}from"./chunk-HE7D3WF3.js";import{a as w,b as t,c as y,d as S,e as u,g as x,i as L,j as C,n as E,p as F}from"./chunk-WD6R6NCK.js";import"./chunk-IWLHRNUS.js";import{Da as n,Ma as c,Z as l,db as m,eb as i,fb as e,gb as d,ma as g,nb as f,ub as a,wb as v}from"./chunk-GKUPRK5K.js";var k=class p{formBuilder=l(E);toastService=l(R);router=l(h);authService=l(N);isLoading=g(!1);loginForm=this.formBuilder.group({email:new u("",[t.required,t.minLength(3),t.maxLength(20)]),password:new u("",[t.required,t.minLength(6),t.maxLength(100)])});onSubmit(){!this.loginForm.valid||this.isLoading()||(this.isLoading.set(!0),this.authService.loginWithEmailAndPassword(this.loginForm.value.email,this.loginForm.value.password).then(s=>{this.toastService.show(`Login successful ${s.user?.email}`,"success"),this.router.navigate(["/home"])}).catch(s=>{this.toastService.show(`Login failed: ${s.error||s.message}`,"error")}).finally(()=>this.isLoading.set(!1)))}static \u0275fac=function(o){return new(o||p)};static \u0275cmp=c({type:p,selectors:[["app-login"]],decls:21,vars:5,consts:[[1,"card","max-w-lg","mx-auto","mt-30"],[1,"card-title","justify-center","text-3xl","text-primary"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","formControlName","email",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],[1,"flex","gap-3","mb-4"],[1,"flex-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["type","submit",1,"btn","mt-4","w-full","btn-primary",3,"disabled"],[1,"mt-4","text-center"],[1,"text-sm","text-gray-600"],["routerLink","/auth/register",1,"text-sm","text-blue-500","ml-1","hover:underline"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1),a(2,"Sign In"),e(),i(3,"div",2)(4,"form",3),f("ngSubmit",function(){return r.onSubmit()}),i(5,"div",4)(6,"label",5),a(7,"Email"),e(),d(8,"input",6),e(),i(9,"div",7)(10,"div",8)(11,"label",9),a(12,"Password"),e(),d(13,"input",10),e()(),i(14,"button",11),a(15),e()(),i(16,"div",12)(17,"span",13),a(18,"Don't have an account?"),e(),i(19,"a",14),a(20,"Register"),e()()()()),o&2&&(n(4),m("formGroup",r.loginForm),n(4),m("readonly",r.isLoading()),n(5),m("readonly",r.isLoading()),n(),m("disabled",r.isLoading()),n(),v(" ",r.isLoading()?"Logging in...":"Login"," "))},dependencies:[F,x,w,y,S,L,C,b],encapsulation:2})};var P=class p{authService=l(N);toastService=l(R);formBuilder=l(E);router=l(h);isLoading=g(!1);registerForm=this.formBuilder.group({name:new u("",[t.required]),email:new u("",[t.required,t.email]),password:new u("",[t.required,t.minLength(6),this.passwordsMatchValidator()]),confirmPassword:new u("",[t.required,t.minLength(6),this.passwordsMatchValidator()])});ngOnInit(){this.formBuilder.group({name:["",t.required],email:["",[t.required,t.email]],password:["",t.required],confirmPassword:["",t.required]})}onSubmit(){if(!this.registerForm.valid)return;let s={name:this.registerForm.value.name,email:this.registerForm.value.email,password:this.registerForm.value.password,role:"Customer"};this.isLoading.set(!0),this.authService.registerWithEmailAndPassword(s).then(o=>{this.toastService.show(`Registration successful: ${o.user?.email}`,"success"),this.router.navigate(["/auth/login"])}).catch(o=>{this.toastService.show(`Registration failed: ${o.error||o.message}`,"error")}).finally(()=>this.isLoading.set(!1))}passwordsMatchValidator(){return s=>{let o=s.get("password")?.value,r=s.get("confirmPassword")?.value;return o===r?null:{passwordsMismatch:!0}}}static \u0275fac=function(o){return new(o||p)};static \u0275cmp=c({type:p,selectors:[["app-register"]],decls:29,vars:7,consts:[[1,"card","max-w-lg","mx-auto","mt-30"],[1,"card-title","justify-center","text-3xl","text-primary"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["id","name","formControlName","name",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","formControlName","email",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],[1,"flex","gap-3","mb-4"],[1,"flex-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["id","confirmPassword","formControlName","confirmPassword","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["type","submit",1,"btn","mt-4","w-full","btn-primary",3,"disabled"],[1,"mt-4","text-center"],[1,"text-sm","text-gray-600"],["routerLink","/auth/login",1,"text-sm","text-blue-500","hover:underline"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1),a(2,"Sign Up"),e(),i(3,"div",2)(4,"form",3),f("ngSubmit",function(){return r.onSubmit()}),i(5,"div",4)(6,"label",5),a(7,"Name"),e(),d(8,"input",6),e(),i(9,"div",4)(10,"label",7),a(11,"Email"),e(),d(12,"input",8),e(),i(13,"div",9)(14,"div",10)(15,"label",11),a(16,"Password"),e(),d(17,"input",12),e(),i(18,"div",10)(19,"label",13),a(20,"Confirm Password"),e(),d(21,"input",14),e()(),i(22,"button",15),a(23),e()(),i(24,"div",16)(25,"span",17),a(26," Already have an account? "),e(),i(27,"a",18),a(28,"Log in"),e()()()()),o&2&&(n(4),m("formGroup",r.registerForm),n(4),m("readonly",r.isLoading()),n(4),m("readonly",r.isLoading()),n(5),m("readonly",r.isLoading()),n(4),m("readonly",r.isLoading()),n(),m("disabled",r.isLoading()),n(),v(" ",r.isLoading()?"Registering...":"Register"," "))},dependencies:[F,x,w,y,S,L,C,b],encapsulation:2})};var te=[{path:"register",component:P,title:"Register"},{path:"login",component:k,title:"Login"}];export{te as routes};

<!-- Loading State -->
@if (isLoading()) {
<div class="min-h-screen flex items-center justify-center">
  <div class="loading loading-spinner loading-lg text-primary"></div>
</div>
}

<!-- Error State -->
@if (error() && !isLoading()) {
<div class="min-h-screen flex items-center justify-center">
  <div class="alert alert-error max-w-md">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="stroke-current shrink-0 h-6 w-6"
      fill="none"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
    <span>{{ error() }}</span>
  </div>
</div>
}

<!-- Products Content -->
@if (products() && !isLoading() && !error()) {
<section id="products-list" class="py-8 px-4">
  <div class="min-h-screen px-6 py-10">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold text-indigo-600">Explore Our Products</h1>
      <p class="mt-2 text-gray-600 text-sm">
        Find the perfect item from our curated catalog
      </p>
    </div>

    <!-- Filters -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-10">
      <!-- Search -->
      <div class="form-control">
        <label class="label text-sm font-semibold text-gray-700">Search</label>
        <input
          type="text"
          [(ngModel)]="filters.search"
          placeholder="Search products..."
          class="input input-bordered bg-white text-indigo-600 placeholder-indigo-400 border-indigo-300 shadow-sm"
        />
      </div>

      <!-- Category -->
      <div class="form-control">
        <label class="label text-sm font-semibold text-gray-700"
          >Category</label
        >
        <select
          [(ngModel)]="filters.category"
          class="select select-bordered bg-white text-indigo-600 placeholder-indigo-400 border-indigo-300 shadow-sm"
        >
          <option value="">All</option>
          <option value="electronics">Electronics</option>
          <option value="fashion">Fashion</option>
          <option value="home">Home & Living</option>
          <option value="sports">Sports & Outdoors</option>
        </select>
      </div>

      <!-- Price Range -->
      <div class="form-control">
        <label class="label text-sm font-semibold text-gray-700"
          >Price Range</label
        >
        <div class="flex gap-2">
          <input
            type="number"
            [(ngModel)]="filters.minPrice"
            placeholder="Min"
            class="input input-bordered w-1/2 bg-white text-indigo-600 placeholder-indigo-400 border-indigo-300 shadow-sm"
          />
          <input
            type="number"
            [(ngModel)]="filters.maxPrice"
            placeholder="Max"
            class="input input-bordered w-1/2 bg-white text-indigo-600 placeholder-indigo-400 border-indigo-300 shadow-sm"
          />
        </div>
      </div>

      <!-- Sort -->
      <div class="form-control">
        <label class="label text-sm font-semibold text-gray-700">Sort By</label>
        <select
          [(ngModel)]="filters.sort"
          class="select select-bordered bg-white text-indigo-600 placeholder-indigo-400 border-indigo-300 shadow-sm"
        >
          <option value="default">Default</option>
          <option value="priceAsc">Price: Low to High</option>
          <option value="priceDesc">Price: High to Low</option>
          <option value="nameAsc">Name: A-Z</option>
          <option value="nameDesc">Name: Z-A</option>
        </select>
      </div>
    </div>

    <!-- Product Grid -->
    <div
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
    >
      @for (product of filteredProducts; track product.id) {
      <div class="card bg-gray-100 shadow-md">
        <figure>
          <img
            [src]="product.image"
            [alt]="product.title"
            class="h-48 w-full object-cover"
          />
        </figure>
        <div class="card-body">
          <h2
            class="card-title text-indigo-600 cursor-pointer"
            [routerLink]="['/products', product.id]"
          >
            {{ product.title }}
          </h2>
          <p class="text-sm text-gray-600">
            {{ product.description | slice : 0 : 70 }}...
          </p>
          <div class="flex justify-between items-center mt-4">
            <span class="text-lg font-bold text-indigo-500">{{
              product.price | currency
            }}</span>
            <button class="btn btn-sm btn-primary">Add to Cart</button>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
</section>
}

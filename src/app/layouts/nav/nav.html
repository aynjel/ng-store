<header class="fixed top-0 left-0 w-full z-50 shadow-sm bg-white">
  <div
    class="navbar sticky top-0 z-50 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white px-4 py-3 shadow-md"
  >
    <div class="container flex mx-auto">
      <!-- Start: Brand & Mobile Menu -->
      <div class="navbar-start">
        <div class="drawer drawer-start w-auto lg:hidden">
          <input id="nav-drawer" type="checkbox" class="drawer-toggle" />
          <div class="drawer-content">
            <!-- label/button that opens the drawer -->
            <label
              for="nav-drawer"
              class="btn btn-ghost hover:bg-transparent hover:text-gray-700 hover:border-transparent hover:shadow-none transition-none"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </label>
          </div>
          <div class="drawer-side">
            <label for="nav-drawer" class="drawer-overlay"></label>

            <div
              class="menu p-6 h-screen min-w-[300px] bg-white text-indigo-600 shadow-lg flex flex-col"
            >
              <div class="flex items-center justify-between mb-4">
                <a class="text-2xl font-bold">Menu</a>
                <!-- close button -->
                <label
                  for="nav-drawer"
                  class="btn btn-ghost hover:bg-transparent hover:text-gray-700 hover:border-transparent hover:shadow-none transition-none"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"
                    />
                  </svg>
                </label>
              </div>

              <!-- User profile block (shows when user is logged in) -->
              @if(authService.user()){
              <div class="mb-4 flex items-center space-x-3">
                <app-avatar
                  [name]="
                    authService.user()?.displayName ||
                    authService.user()?.email!
                  "
                  shape="round"
                />
                <div>
                  <div class="font-semibold text-base">
                    {{
                      authService.user()?.displayName ||
                        authService.user()?.email
                    }}
                  </div>
                  <a routerLink="/profile" class="text-sm text-indigo-500"
                    >View profile</a
                  >
                </div>
              </div>
              }

              <nav class="flex-1">
                <ul class="space-y-4 text-lg">
                  <li>
                    <a
                      routerLink="/home"
                      class="block hover:bg-indigo-500 hover:text-white rounded-md px-3 py-2"
                      routerLinkActive="bg-indigo-500 text-white"
                      >Home</a
                    >
                  </li>
                  <li>
                    <a
                      routerLink="/products"
                      class="block hover:bg-indigo-500 hover:text-white rounded-md px-3 py-2"
                      routerLinkActive="bg-indigo-500 text-white"
                      >Products</a
                    >
                  </li>
                  <li>
                    <a
                      routerLink="/users"
                      class="block hover:bg-indigo-500 hover:text-white rounded-md px-3 py-2"
                      routerLinkActive="bg-indigo-500 text-white"
                      >Users</a
                    >
                  </li>
                  <li>
                    <a
                      routerLink="/about"
                      class="block hover:bg-indigo-500 hover:text-white rounded-md px-3 py-2"
                      routerLinkActive="bg-indigo-500 text-white"
                      >About</a
                    >
                  </li>
                  <li>
                    <a
                      routerLink="/contact"
                      class="block hover:bg-indigo-500 hover:text-white rounded-md px-3 py-2"
                      routerLinkActive="bg-indigo-500 text-white"
                      >Contact</a
                    >
                  </li>
                </ul>
              </nav>

              <div class="mt-6">
                <!-- conditional footer actions -->
                @if(authService.user()) {
                <ng-container>
                  <div class="space-y-3">
                    <a routerLink="/settings" class="btn btn-outline btn-block"
                      >Settings</a
                    >
                    <button
                      class="btn btn-primary btn-block"
                      (click)="onLogout()"
                    >
                      Logout
                    </button>
                  </div>
                </ng-container>
                } @else {
                <div class="space-y-3">
                  <a
                    routerLink="/carts"
                    class="btn btn-outline btn-block text-indigo-600"
                    >Cart</a
                  >
                  <a routerLink="/auth/login" class="btn btn-primary btn-block"
                    >Login / Register</a
                  >
                </div>
                }
              </div>
            </div>
          </div>
        </div>
        <a class="text-xl font-bold cursor-default">NgStore</a>
      </div>

      <!-- Center: Desktop Nav -->
      <div class="navbar-center hidden lg:flex">
        <ul class="menu menu-horizontal px-1 space-x-2">
          <li>
            <a
              class="hover:bg-white hover:text-indigo-600 rounded-md px-3 py-1"
              routerLink="/home"
              routerLinkActive="bg-white text-indigo-500"
              >Home</a
            >
          </li>
          <li>
            <a
              class="hover:bg-white hover:text-indigo-600 rounded-md px-3 py-1"
              routerLink="/products"
              routerLinkActive="bg-white text-indigo-500"
              >Products</a
            >
          </li>
          <li>
            <a
              class="hover:bg-white hover:text-indigo-600 rounded-md px-3 py-1"
              routerLink="/users"
              routerLinkActive="bg-white text-indigo-500"
              >Users</a
            >
          </li>
          <li>
            <a
              class="hover:bg-white hover:text-indigo-600 rounded-md px-3 py-1"
              routerLink="/about"
              routerLinkActive="bg-white text-indigo-500"
              >About</a
            >
          </li>
          <li>
            <a
              class="hover:bg-white hover:text-indigo-600 rounded-md px-3 py-1"
              routerLink="/contact"
              routerLinkActive="bg-white text-indigo-500"
              >Contact</a
            >
          </li>
        </ul>
      </div>

      <!-- End: CTA & Icons -->
      <div class="navbar-end space-x-4">
        @if(authService.user()){
        <!-- Cart Icon -->
        <div class="indicator">
          <span class="indicator-item badge badge-sm badge-error font-bold">{{
            1
          }}</span>
          <button
            class="btn btn-sm btn-circle bg-white text-indigo-600 hover:bg-indigo-100"
            routerLink="/carts"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"
              />
            </svg>
          </button>
        </div>

        <!-- User Icon with Dropdown -->
        <div class="dropdown dropdown-end">
          <button
            tabindex="0"
            class="btn btn-sm btn-circle bg-white text-indigo-600 hover:bg-indigo-100"
          >
            <app-avatar
              [name]="
                authService.user()?.displayName || authService.user()?.email!
              "
              shape="round"
              [size]="32"
            />
          </button>
          <ul
            tabindex="0"
            class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-white text-indigo-600 rounded-box w-40"
          >
            <li>
              <a
                class="hover:bg-indigo-500 hover:text-white"
                routerLink="/profile"
                >Profile</a
              >
            </li>
            <li>
              <a
                class="hover:bg-indigo-500 hover:text-white"
                routerLink="/settings"
                >Settings</a
              >
            </li>
            <li>
              <a
                class="hover:bg-indigo-500 hover:text-white"
                (click)="onLogout()"
                >Logout</a
              >
            </li>
          </ul>
        </div>
        } @else {
        <button
          class="btn btn-sm bg-white text-indigo-600 hover:bg-indigo-100 font-semibold"
          (click)="onShopNow()"
        >
          Shop Now
        </button>
        }
      </div>
    </div>
  </div>
</header>

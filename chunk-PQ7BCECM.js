import{a as R}from"./chunk-F6ZE5O2D.js";import{b as M}from"./chunk-JXSS3HON.js";import{b as V}from"./chunk-VS2QB7XP.js";import"./chunk-65WGCY4B.js";import{c as h,d as w}from"./chunk-FOS2LWDE.js";import{a as y,b as t,c as x,d as S,e as u,g as L,i as C,j as F,n as E,p as N}from"./chunk-XOMXMIMX.js";import{Da as a,E as D,H as g,I as P,Ma as f,Z as d,db as s,eb as r,fb as e,gb as l,lb as v,ma as c,rb as o,tb as b}from"./chunk-MVS5HVBG.js";var k=class p{formBuilder=d(E);toastService=d(R);authService=d(M);router=d(h);isLoading=c(!1);loginForm=this.formBuilder.group({username:new u("",[t.required,t.minLength(3),t.maxLength(20)]),password:new u("",[t.required,t.minLength(6),t.maxLength(100)])});onSubmit(){if(!this.loginForm.valid||this.isLoading())return;let m={username:this.loginForm.value.username,password:this.loginForm.value.password};this.authService.login(m).pipe(D(3e3),g(()=>this.isLoading.set(!1))).subscribe({next:n=>{this.toastService.show("Login successful","success"),this.router.navigate(["/home"])},error:n=>{this.toastService.show("Login failed: "+n.error,"error")}})}static \u0275fac=function(n){return new(n||p)};static \u0275cmp=f({type:p,selectors:[["app-login"]],decls:21,vars:5,consts:[[1,"card","max-w-lg","mx-auto","mt-30"],[1,"card-title","justify-center","text-3xl","text-primary"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["id","username","formControlName","username",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],[1,"flex","gap-3","mb-4"],[1,"flex-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["type","submit",1,"btn","mt-4","w-full","btn-primary",3,"disabled"],[1,"mt-4","text-center"],[1,"text-sm","text-gray-600"],["routerLink","/auth/register",1,"text-sm","text-blue-500","ml-1","hover:underline"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"div",1),o(2,"Sign In"),e(),r(3,"div",2)(4,"form",3),v("ngSubmit",function(){return i.onSubmit()}),r(5,"div",4)(6,"label",5),o(7,"Username"),e(),l(8,"input",6),e(),r(9,"div",7)(10,"div",8)(11,"label",9),o(12,"Password"),e(),l(13,"input",10),e()(),r(14,"button",11),o(15),e()(),r(16,"div",12)(17,"span",13),o(18,"Don't have an account?"),e(),r(19,"a",14),o(20,"Register"),e()()()()),n&2&&(a(4),s("formGroup",i.loginForm),a(4),s("readonly",i.isLoading()),a(5),s("readonly",i.isLoading()),a(),s("disabled",i.isLoading()),a(),b(" ",i.isLoading()?"Logging in...":"Login"," "))},dependencies:[N,L,y,x,S,C,F,w],encapsulation:2})};var q=class p{userService=d(V);toastService=d(R);formBuilder=d(E);router=d(h);isLoading=c(!1);registerForm=this.formBuilder.group({name:new u("",[t.required]),username:new u("",[t.required,t.minLength(3),t.maxLength(20)]),email:new u("",[t.required,t.email]),password:new u("",[t.required,t.minLength(6),this.passwordsMatchValidator()]),confirmPassword:new u("",[t.required,t.minLength(6),this.passwordsMatchValidator()])});ngOnInit(){this.formBuilder.group({username:["",t.required],email:["",[t.required,t.email]],password:["",t.required],confirmPassword:["",t.required]})}onSubmit(){if(!this.registerForm.valid)return;let m={email:this.registerForm.value.email,username:this.registerForm.value.username,password:this.registerForm.value.password,name:this.registerForm.value.name,active:!0,role:"Customer"};this.isLoading.set(!0),this.userService.create(m).pipe(P(),g(()=>this.isLoading.set(!1))).subscribe({next:n=>{this.toastService.show("Registration successful!","success"),this.router.navigate(["/auth/login"])},error:n=>{this.toastService.show("Registration failed. Please try again.","error")}})}passwordsMatchValidator(){return m=>{let n=m.get("password")?.value,i=m.get("confirmPassword")?.value;return n===i?null:{passwordsMismatch:!0}}}static \u0275fac=function(n){return new(n||p)};static \u0275cmp=f({type:p,selectors:[["app-register"]],decls:33,vars:8,consts:[[1,"card","max-w-lg","mx-auto","mt-30"],[1,"card-title","justify-center","text-3xl","text-primary"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["id","name","formControlName","name",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["id","username","formControlName","username",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","formControlName","email",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],[1,"flex","gap-3","mb-4"],[1,"flex-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["id","confirmPassword","formControlName","confirmPassword","type","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2",3,"readonly"],["type","submit",1,"btn","mt-4","w-full","btn-primary",3,"disabled"],[1,"mt-4","text-center"],[1,"text-sm","text-gray-600"],["routerLink","/auth/login",1,"text-sm","text-blue-500","hover:underline"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"div",1),o(2,"Sign Up"),e(),r(3,"div",2)(4,"form",3),v("ngSubmit",function(){return i.onSubmit()}),r(5,"div",4)(6,"label",5),o(7,"Name"),e(),l(8,"input",6),e(),r(9,"div",4)(10,"label",7),o(11,"Username"),e(),l(12,"input",8),e(),r(13,"div",4)(14,"label",9),o(15,"Email"),e(),l(16,"input",10),e(),r(17,"div",11)(18,"div",12)(19,"label",13),o(20,"Password"),e(),l(21,"input",14),e(),r(22,"div",12)(23,"label",15),o(24,"Confirm Password"),e(),l(25,"input",16),e()(),r(26,"button",17),o(27),e()(),r(28,"div",18)(29,"span",19),o(30," Already have an account? "),e(),r(31,"a",20),o(32,"Log in"),e()()()()),n&2&&(a(4),s("formGroup",i.registerForm),a(4),s("readonly",i.isLoading()),a(4),s("readonly",i.isLoading()),a(4),s("readonly",i.isLoading()),a(5),s("readonly",i.isLoading()),a(4),s("readonly",i.isLoading()),a(),s("disabled",i.isLoading()),a(),b(" ",i.isLoading()?"Registering...":"Register"," "))},dependencies:[N,L,y,x,S,C,F,w],encapsulation:2})};var se=[{path:"register",component:q,title:"Register"},{path:"login",component:k,title:"Login"}];export{se as routes};
